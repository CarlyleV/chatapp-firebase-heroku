(function(e){function t(t){for(var a,i,r=t[0],c=t[1],l=t[2],d=0,f=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&f.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(f.length)f.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],a=!0,r=1;r<s.length;r++){var c=s[r];0!==n[c]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=s[0]))}return e}var a={},n={app:0},o=[];function i(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=a,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;o.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"02d0":function(e,t,s){"use strict";s("9e32")},1761:function(e,t,s){"use strict";s("8043")},"2bb2":function(e,t,s){},"32e1":function(e,t,s){},3813:function(e,t,s){"use strict";s("2bb2")},4793:function(e,t,s){"use strict";s("32e1")},"56d7":function(e,t,s){"use strict";s.r(t),s.d(t,"databaseRef",(function(){return we}));s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("7a23"),n={class:"full",ref:"full"};function o(e,t,s,o,i,r){var c=Object(a["w"])("nav-header"),l=Object(a["w"])("router-view");return Object(a["p"])(),Object(a["d"])("div",n,[Object(a["g"])(c,{class:"navHeader"}),Object(a["g"])(l,{class:"router"})],512)}var i=Object(a["F"])("data-v-33a7933c");Object(a["s"])("data-v-33a7933c");var r=Object(a["g"])("i",{class:"fa fa-chevron-left","aria-hidden":"true"},null,-1);Object(a["q"])();var c=i((function(e,t,s,n,o,i){return Object(a["p"])(),Object(a["d"])("div",{class:"/"!==e.$route.path?"topBar":"topBar End"},["/"!==e.$route.path?(Object(a["p"])(),Object(a["d"])("button",{key:0,class:"back",onClick:t[1]||(t[1]=function(t){return i.backward(e.$route.path)})},[r])):Object(a["e"])("",!0),Object(a["g"])("button",{type:"button",class:"/login"!==e.$route.path?"logBtn":"logBtn invis",onClick:t[2]||(t[2]=function(){return i.signInOut&&i.signInOut.apply(i,arguments)})},Object(a["y"])(o.loggedIn?"ログアウト":"ログイン"),3)],2)})),l=s("1da1"),u=(s("96cf"),s("ac1f"),s("5319"),s("260b")),d=(s("ea7b"),{beforeUpdate:function(){var e=this;u["a"].auth().onAuthStateChanged((function(t){e.loggedIn=!!t,null!==t&&(e.nickName=t.displayName,e.uid=t.uid)}))},data:function(){return{loggedIn:!1,nickName:"",uid:""}},methods:{signInOut:function(){return this.loggedIn?this.signOut():this.$router.replace({name:"Login"})},signOut:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u["a"].auth().signOut();case 3:e.nickName="",e.$router.replace({name:"Login"}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},backward:function(e){return"/login"===e?this.$router.replace({name:"Home"}):"/register"===e?this.$router.replace({name:"Login"}):void 0}},watch:{loggedIn:function(){this.$store.state.logCheck=this.loggedIn},nickName:function(){this.$store.state.nickname=this.nickName},uid:function(){this.$store.state.uid=this.uid}}});s("02d0");d.render=c,d.__scopeId="data-v-33a7933c";var f=d,h={components:{"nav-header":f},mounted:function(){var e=window.innerHeight;this.$refs.full.style.height=e+"px"}};s("4793");h.render=o;var p=h,g=s("6c02"),b=Object(a["F"])("data-v-3fc9046e");Object(a["s"])("data-v-3fc9046e");var m={class:"allMessage",ref:"box",touchstart:""},O=Object(a["g"])("div",{class:"noneS"},null,-1),j={key:0},w={key:0,class:"nickname"},v=Object(a["g"])("div",{class:"spacer"},null,-1),y={class:"content"},k={class:"contentAlign"},T=Object(a["g"])("div",{class:"spacer"},null,-1),x={class:"messageTime"},L={ref:"footSpace"},P={ref:"footerRef"},S=Object(a["g"])("i",{class:"fa fa-paper-plane","aria-hidden":"true"},null,-1);Object(a["q"])();var D=b((function(e,t,s,n,o,i){return Object(a["p"])(),Object(a["d"])("div",null,[Object(a["g"])("div",m,[O,(Object(a["p"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(o.messages,(function(t,s){return Object(a["p"])(),Object(a["d"])("div",{key:t.key},[0===s||i.exMD(t.messageTime)!==i.exMD(o.messages[s-1].messageTime)?(Object(a["p"])(),Object(a["d"])("div",j,[Object(a["g"])("span",{ref:function(e){e&&o.absoluteDateList.push(e)}},null,512),Object(a["g"])("div",{class:"messageDate",ref:function(e){e&&o.dateList.push(e)}},Object(a["y"])(i.exMD(t.messageTime)),513)])):Object(a["e"])("",!0),Object(a["g"])("div",{class:t.uid==e.$store.state.uid?"message thisLogged":"message others"},[t.uid!==e.$store.state.uid?(Object(a["p"])(),Object(a["d"])("div",w,Object(a["y"])(t.nickName),1)):Object(a["e"])("",!0),v,Object(a["g"])("div",y,[Object(a["g"])("div",k,Object(a["y"])(t.content),1)]),T,Object(a["g"])("div",x,Object(a["y"])(i.dDight(i.exDate(t.messageTime).getHours()))+": "+Object(a["y"])(i.dDight(i.exDate(t.messageTime).getMinutes())),1)],2)])})),128))],512),Object(a["g"])("div",L,null,512),Object(a["g"])("footer",P,[Object(a["g"])("form",{onSubmit:t[2]||(t[2]=Object(a["E"])((function(){return i.sendMessage&&i.sendMessage.apply(i,arguments)}),["prevent"])),class:"sendMessageForm"},[Object(a["D"])(Object(a["g"])("textarea",{name:"sendMessageText",id:"sendMessageText","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.sendMessageText=e}),placeholder:e.$store.state.logCheck?"":"ログインしてください",class:"writeMessage",disabled:!e.$store.state.logCheck},null,8,["placeholder","disabled"]),[[a["B"],o.sendMessageText]]),Object(a["g"])("button",{type:"submit",class:o.sendMessageText?"writeMessageButton able":"writeMessageButton disable"},[S],2)],32)],512)])})),$=(s("fb6a"),s("d3b7"),s("25f0"),s("159b"),s("b64b"),{data:function(){return{nickname:null,sendMessageText:"",messages:[],data:null,watchFlag:!1,dateList:[],absoluteDateList:[]}},methods:{dDight:function(e){return("0"+e).slice(-2)},exDate:function(e){return new Date(e)},exMD:function(e){var t=new Date(e).getFullYear().toString(),s=(new Date(e).getMonth()+1).toString(),a=new Date(e).getDate().toString();return t+"/"+s+"/"+a},sendMessage:function(){var e=(new Date).getTime(),t=we.database().ref("messages"),s={uid:this.$store.state.uid,nickName:this.nickname,messageTime:e,content:this.sendMessageText};t.push({message:s}),this.sendMessageText=""},scrollH:function(){if(1===this.dateList.length)this.dateList[0].style.position="fixed",this.dateList[0].style.top=this.$refs.box.offsetTop+10+"px",this.dateList[0].style.left="calc(50% - "+this.dateList[0].offsetWidth+"px/2)";else if(document.documentElement.scrollTop<this.absoluteDateList[this.absoluteDateList.length-1].offsetTop-this.$refs.box.offsetTop)for(var e=0;e<this.dateList.length-1;e++)document.documentElement.scrollTop+this.$refs.box.offsetTop>this.absoluteDateList[e].offsetTop&&document.documentElement.scrollTop<this.absoluteDateList[e+1].offsetTop-this.$refs.box.offsetTop-40?(this.dateList[e].style.position="fixed",this.dateList[e].style.top=this.$refs.box.offsetTop+10+"px",this.dateList[e].style.left="calc(50% - "+this.dateList[e].offsetWidth+"px/2)"):(this.dateList[e].style.position="static",this.dateList[e].style.left,this.dateList[e].style.top="",this.dateList[this.dateList.length-1].style.position="",this.dateList[this.dateList.length-1].style.top="",this.dateList[this.dateList.length-1].style.left="");else document.documentElement.scrollTop>this.absoluteDateList[this.absoluteDateList.length-1].offsetTop-this.$refs.box.offsetTop&&(this.dateList[this.dateList.length-1].style.position="fixed",this.dateList[this.dateList.length-1].style.top=this.$refs.box.offsetTop+10+"px",this.dateList[this.dateList.length-1].style.left="calc(50% - "+this.dateList[this.dateList.length-1].offsetWidth+"px/2)")}},mounted:function(){var e=this;this.nickname=this.$store.state.nickname;var t=we.database().ref("messages");t.on("value",(function(t){var s=t.val(),a=[];Object.keys(s).forEach((function(e){a.push({id:e,uid:s[e].message.uid,nickName:s[e].message.nickName,content:s[e].message.content,messageTime:s[e].message.messageTime})})),e.messages=a,e.data=s})),this.$refs.footSpace.style.height=this.$refs.footerRef.offsetHeight+10+"px",window.onscroll=this.scrollH,u["a"].auth().onAuthStateChanged((function(t){null!==t&&(e.nickname=t.displayName)}))},beforeUpdate:function(){this.dateList=[],this.absoluteDateList=[]},watch:{messages:function(){var e=this;this.watchFlag?this.$nextTick((function(){document.documentElement.scrollTop=e.$refs.box.scrollHeight})):this.watchFlag=!this.watchFlag}}});s("1761");$.render=D,$.__scopeId="data-v-3fc9046e";var C=$,M=Object(a["F"])("data-v-e8258276");Object(a["s"])("data-v-e8258276");var A={class:"loginbody"},R=Object(a["g"])("div",{class:"tittle"},[Object(a["g"])("strong",null,"ログイン")],-1),I={class:"errorBox"},_={class:"email"},F=Object(a["g"])("label",{for:"email"},"メール",-1),B={class:"pass"},E=Object(a["g"])("label",{for:"password"},"パスワード",-1),N={class:"passInput"},H=Object(a["g"])("input",{type:"submit",value:"ログイン",class:"loginBtn"},null,-1),q=Object(a["f"])("新規登録はこちら");Object(a["q"])();var U=M((function(e,t,s,n,o,i){var r=Object(a["w"])("router-link");return Object(a["p"])(),Object(a["d"])("div",A,[R,Object(a["g"])("form",{onSubmit:t[4]||(t[4]=Object(a["E"])((function(){return i.pressed&&i.pressed.apply(i,arguments)}),["prevent"]))},[Object(a["g"])("div",I,[Object(a["g"])("p",null,[Object(a["g"])("strong",null,Object(a["y"])(o.error.message),1)])]),Object(a["g"])("div",_,[F,Object(a["D"])(Object(a["g"])("input",{type:"email",name:"email",id:"email",placeholder:" E-mail",class:"emailInput","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.email=e})},null,512),[[a["B"],o.email]])]),Object(a["g"])("div",B,[E,Object(a["g"])("div",N,[Object(a["D"])(Object(a["g"])("input",{type:o.showPassword?"text":"password",name:"password",id:"password",placeholder:" Password","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.password=e})},null,8,["type"]),[[a["A"],o.password]]),Object(a["g"])("button",{type:"button",id:"showButton",value:o.showPassword?"unshow":"show",onClick:t[3]||(t[3]=function(e){return o.showPassword=!o.showPassword})},[Object(a["g"])("i",{class:o.showPassword?"fa fa-eye":"fa fa-eye-slash"},null,2)],8,["value"])])]),H,Object(a["g"])(r,{to:"/register",id:"register"},{default:M((function(){return[q]})),_:1})],32)])})),z={data:function(){return{email:"",password:"",showPassword:!1,error:""}},methods:{pressed:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u["a"].auth().signInWithEmailAndPassword(e.email,e.password);case 3:e.$router.replace({name:"Home"}),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.error=t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},updated:function(){console.log(this.error)}};s("3813");z.render=U,z.__scopeId="data-v-e8258276";var V=z,W=Object(a["F"])("data-v-3c62fb0e");Object(a["s"])("data-v-3c62fb0e");var Z={class:"registerbody"},J=Object(a["g"])("div",{class:"tittle"},"新規登録",-1),Y={key:0,style:{color:"red"}},K={class:"nickname"},Q=Object(a["g"])("label",{for:"nickname"},"ユーザー名",-1),G={class:"email"},X=Object(a["g"])("label",{for:"mail"},"メール ",-1),ee={class:"password"},te=Object(a["g"])("label",{for:"password"},"パスワード ",-1),se={class:"showPassword"},ae={class:"repeatPassword"},ne=Object(a["g"])("label",{for:"repeatPassword"},"パスワード再入力 ",-1),oe={class:"showPassword"};Object(a["q"])();var ie=W((function(e,t,s,n,o,i){return Object(a["p"])(),Object(a["d"])("div",Z,[J,o.error?(Object(a["p"])(),Object(a["d"])("div",Y,[Object(a["g"])("strong",null,Object(a["y"])(o.error.message),1)])):Object(a["e"])("",!0),Object(a["g"])("form",{onSubmit:t[9]||(t[9]=Object(a["E"])((function(){return i.pressed&&i.pressed.apply(i,arguments)}),["prevent"]))},[Object(a["g"])("div",K,[Q,Object(a["D"])(Object(a["g"])("input",{type:"text",id:"nickname",name:"nickname",required:"","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.nicknameText=e})},null,512),[[a["B"],o.nicknameText]])]),Object(a["g"])("div",G,[X,Object(a["D"])(Object(a["g"])("input",{type:"email",id:"email",name:"email",required:"","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.emailText=e}),style:[i.emailStyle,i.emailCheckRStyle],onChange:t[3]||(t[3]=function(){return i.emailCheckR&&i.emailCheckR.apply(i,arguments)}),onInput:t[4]||(t[4]=function(){return i.fullToHalf&&i.fullToHalf.apply(i,arguments)})},null,36),[[a["B"],o.emailText]])]),Object(a["g"])("div",ee,[te,Object(a["g"])("div",se,[Object(a["D"])(Object(a["g"])("input",{type:o.showPassword?"text":"password",id:"password",name:"password",required:"","onUpdate:modelValue":t[5]||(t[5]=function(e){return o.passwordT=e}),minlength:"8",style:i.passwordStyle},null,12,["type"]),[[a["A"],o.passwordT]]),Object(a["g"])("button",{type:"button",class:"show",onClick:t[6]||(t[6]=function(e){return o.showPassword=!o.showPassword})},[Object(a["g"])("i",{class:o.showPassword?"fa fa-eye":"fa fa-eye-slash"},null,2)])])]),Object(a["g"])("div",ae,[ne,Object(a["g"])("div",oe,[Object(a["D"])(Object(a["g"])("input",{type:o.againShowPassword?"text":"password",id:"repeatPassword",name:"repeatPassword",required:"","onUpdate:modelValue":t[7]||(t[7]=function(e){return o.repeatPasswordT=e}),minlength:"8",style:i.repeatPasswordStyle},null,12,["type"]),[[a["A"],o.repeatPasswordT]]),Object(a["g"])("button",{type:"button",class:"show",onClick:t[8]||(t[8]=function(e){return o.againShowPassword=!o.againShowPassword})},[Object(a["g"])("i",{class:o.againShowPassword?"fa fa-eye":"fa fa-eye-slash"},null,2)])])]),Object(a["g"])("button",{type:"submit",class:"submit",disabled:!i.allCheck},"登録",8,["disabled"])],32)])})),re={data:function(){return{nicknameText:"",passwordT:"",repeatPasswordT:"",emailText:"",mailReg:/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}.[A-Za-z0-9]{1,}$/,emailCheckRFlag:!0,showPassword:!1,againShowPassword:!1,passwordCheckRFlag:!0,error:""}},computed:{emailStyle:function(){return"background:"+(this.mailReg.test(this.emailText)?"#90ee90":"")},emailCheckRStyle:function(){return"background:"+(this.emailCheckRFlag?"":"rgb(255, 182, 182)")},passwordStyle:function(){return"background:"+(this.passwordT.length>7?"#90ee90":"")},repeatPasswordStyle:function(){return"background:"+(this.passwordT===this.repeatPasswordT&&this.passwordT.length>7?"#90ee90":"")},allCheck:function(){return this.mailReg.test(this.emailText)&&this.passwordT===this.repeatPasswordT&&this.passwordT.length>7&&this.passwordT.length>7&&""!==this.nicknameText}},methods:{emailCheckR:function(){this.emailCheckRFlag=this.mailReg.test(this.emailText)},fullToHalf:function(){this.emailText=this.emailText.replace(/[Ａ-Ｚａ-ｚ０-９]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}))},pressed:function(){var e=this;u["a"].auth().createUserWithEmailAndPassword(this.emailText,this.passwordT).then((function(t){return t.user.updateProfile({displayName:e.nicknameText})})).then((function(){e.$router.replace({name:"Home"})})).catch((function(t){return e.error=t}))}}};s("7af4");re.render=ie,re.__scopeId="data-v-3c62fb0e";var ce=re,le=[{path:"/",name:"Home",component:C},{path:"/login",name:"Login",component:V},{path:"/register",name:"Register",component:ce}],ue=Object(g["a"])({history:Object(g["b"])(),routes:le});ue.beforeEach((function(e,t,s){if("/register"===e.path||"/login"===e.path)var a=u["a"].auth().onAuthStateChanged((function(e){console.log(e),e?s("/"):s(),a()}));else s()}));var de=ue,fe=s("5502"),he=Object(fe["a"])({state:{logCheck:!1,nickname:null,uid:null},mutations:{},actions:{},modules:{}}),pe=s("bc3a"),ge=s.n(pe),be=s("2106"),me=s.n(be),Oe=(s("66ce"),s("9483"));Object(Oe["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var je={apiKey:"AIzaSyAkmQ12qMiCzrYS7MAW9cfZoqASDW1odOc",authDomain:"vue-chat-36815.firebaseapp.com",databaseURL:"vue-chat-36815-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"vue-chat-36815",storageBucket:"vue-chat-36815.appspot.com",messagingSenderId:"14261960732",appId:"1:14261960732:web:006d4003f4e22cdea85fd9"},we=u["a"].initializeApp(je),ve=Object(a["c"])(p);ve.use(he),ve.use(de),ve.use(me.a,ge.a),ve.mount("#app")},"7af4":function(e,t,s){"use strict";s("b7a5")},8043:function(e,t,s){},"9e32":function(e,t,s){},b7a5:function(e,t,s){}});
//# sourceMappingURL=app.6ec86ede.js.map