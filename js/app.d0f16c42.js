(function(e){function t(t){for(var a,r,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],a=!0,o=1;o<s.length;o++){var c=s[o];0!==n[c]&&(a=!1)}a&&(i.splice(t--,1),e=r(r.s=s[0]))}return e}var a={},n={app:0},i=[];function r(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=a,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(s,a,function(t){return e[t]}.bind(null,a));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0655":function(e,t,s){},"2bb2":function(e,t,s){},3813:function(e,t,s){"use strict";s("2bb2")},"3fb3":function(e,t,s){"use strict";s("b59a")},"55dc":function(e,t,s){"use strict";s("dccd")},"56d7":function(e,t,s){"use strict";s.r(t),s.d(t,"databaseRef",(function(){return me}));s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("7a23");function n(e,t,s,n,i,r){var o=Object(a["w"])("nav-header"),c=Object(a["w"])("router-view");return Object(a["p"])(),Object(a["d"])(a["a"],null,[Object(a["g"])(o,{class:"navHeader"}),Object(a["g"])(c)],64)}var i=Object(a["F"])("data-v-079c5f9c");Object(a["s"])("data-v-079c5f9c");var r={class:"name"},o=Object(a["g"])("i",{class:"fa fa-chevron-left","aria-hidden":"true"},null,-1);Object(a["q"])();var c=i((function(e,t,s,n,i,c){return Object(a["p"])(),Object(a["d"])("div",{class:"/"!==e.$route.path?"topBar":"topBar End"},[Object(a["g"])("div",r,Object(a["y"])(i.nickName),1),"/"!==e.$route.path?(Object(a["p"])(),Object(a["d"])("button",{key:0,class:"back",onClick:t[1]||(t[1]=function(t){return c.backward(e.$route.path)})},[o])):Object(a["e"])("",!0),Object(a["g"])("button",{type:"button",class:"/login"!==e.$route.path?"logBtn":"logBtn invis",onClick:t[2]||(t[2]=function(){return c.signInOut&&c.signInOut.apply(c,arguments)})},Object(a["y"])(i.loggedIn?"ログアウト":"ログイン"),3)],2)})),l=s("1da1"),u=(s("96cf"),s("ac1f"),s("5319"),s("260b")),d=(s("ea7b"),{beforeUpdate:function(){var e=this;u["a"].auth().onAuthStateChanged((function(t){e.loggedIn=!!t,null!==t&&(e.nickName=t.displayName,e.uid=t.uid)}))},data:function(){return{loggedIn:!1,nickName:"",uid:""}},methods:{signInOut:function(){return this.loggedIn?this.signOut():this.$router.replace({name:"Login"})},signOut:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u["a"].auth().signOut();case 3:e.nickName="",e.$router.replace({name:"Login"}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},backward:function(e){return"/login"===e?this.$router.replace({name:"Home"}):"/register"===e?this.$router.replace({name:"Login"}):void 0}},watch:{loggedIn:function(){this.$store.state.logCheck=this.loggedIn},nickName:function(){this.$store.state.nickname=this.nickName},uid:function(){this.$store.state.uid=this.uid}}});s("3fb3");d.render=c,d.__scopeId="data-v-079c5f9c";var p=d,b={components:{"nav-header":p}};s("6e60");b.render=n;var h=b,f=s("6c02"),g=Object(a["F"])("data-v-702c2f79");Object(a["s"])("data-v-702c2f79");var m={class:"allMessage",ref:"box",touchstart:""},O=Object(a["g"])("div",{class:"noneS"},null,-1),j={key:0},w={key:0,class:"nickname"},v=Object(a["g"])("div",{class:"spacer"},null,-1),y={class:"content"},k={class:"contentAlign"},x=Object(a["g"])("div",{class:"spacer"},null,-1),T={class:"messageTime"},L=Object(a["g"])("i",{class:"fa fa-paper-plane","aria-hidden":"true"},null,-1);Object(a["q"])();var P=g((function(e,t,s,n,i,r){return Object(a["p"])(),Object(a["d"])("div",null,[Object(a["g"])("div",m,[O,(Object(a["p"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(i.messages,(function(t,s){return Object(a["p"])(),Object(a["d"])("div",{key:t.key},[0===s||r.exMD(t.messageTime)!==r.exMD(i.messages[s-1].messageTime)?(Object(a["p"])(),Object(a["d"])("div",j,[Object(a["g"])("span",{ref:function(e){e&&i.absoluteDateList.push(e)}},null,512),Object(a["g"])("div",{class:"messageDate",ref:function(e){e&&i.dateList.push(e)}},Object(a["y"])(r.exMD(t.messageTime)),513)])):Object(a["e"])("",!0),Object(a["g"])("div",{class:t.uid==e.$store.state.uid?"message thisLogged":"message others"},[t.uid!==e.$store.state.uid?(Object(a["p"])(),Object(a["d"])("div",w,Object(a["y"])(t.nickName),1)):Object(a["e"])("",!0),v,Object(a["g"])("div",y,[Object(a["g"])("div",k,Object(a["y"])(t.content),1)]),x,Object(a["g"])("div",T,Object(a["y"])(r.dDight(r.exDate(t.messageTime).getHours()))+": "+Object(a["y"])(r.dDight(r.exDate(t.messageTime).getMinutes())),1)],2)])})),128))],512),Object(a["g"])("footer",null,[Object(a["g"])("form",{onSubmit:t[2]||(t[2]=Object(a["E"])((function(){return r.sendMessage&&r.sendMessage.apply(r,arguments)}),["prevent"])),class:"sendMessageForm"},[Object(a["D"])(Object(a["g"])("textarea",{name:"sendMessageText",id:"sendMessageText","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.sendMessageText=e}),placeholder:e.$store.state.logCheck?"":"ログインしてください",class:"writeMessage",disabled:!e.$store.state.logCheck},null,8,["placeholder","disabled"]),[[a["B"],i.sendMessageText]]),Object(a["g"])("button",{type:"submit",value:"Send",class:i.sendMessageText?"writeMessageButton able":"writeMessageButton disable"},[L],2)],32)])])})),D=(s("fb6a"),s("d3b7"),s("25f0"),s("159b"),s("b64b"),{data:function(){return{nickname:null,sendMessageText:"",messages:[],data:null,watchFlag:!1,dateList:[],absoluteDateList:[]}},methods:{dDight:function(e){return("0"+e).slice(-2)},exDate:function(e){return new Date(e)},exMD:function(e){var t=new Date(e).getFullYear().toString(),s=(new Date(e).getMonth()+1).toString(),a=new Date(e).getDate().toString();return t+"/"+s+"/"+a},sendMessage:function(){var e=(new Date).getTime(),t=me.database().ref("messages"),s={uid:this.$store.state.uid,nickName:this.nickname,messageTime:e,content:this.sendMessageText};t.push({message:s}),this.sendMessageText=""},scrollH:function(){if(1===this.dateList.length)this.dateList[0].style.position="fixed",this.dateList[0].style.top=this.$refs.box.offsetTop+10+"px",this.dateList[0].style.left=" calc(50% - 90px/2)";else if(this.$refs.box.scrollTop<this.absoluteDateList[this.absoluteDateList.length-1].offsetTop-this.$refs.box.offsetTop)for(var e=0;e<this.dateList.length-1;e++)this.$refs.box.scrollTop+this.$refs.box.offsetTop>this.absoluteDateList[e].offsetTop&&this.$refs.box.scrollTop<this.absoluteDateList[e+1].offsetTop-this.$refs.box.offsetTop-40?(this.dateList[e].style.position="fixed",this.dateList[e].style.top=this.$refs.box.offsetTop+10+"px",this.dateList[e].style.left="calc(50% - 90px/2)"):(this.dateList[e].style.position="static",this.dateList[e].style.left,this.dateList[e].style.top="",this.dateList[this.dateList.length-1].style.position="",this.dateList[this.dateList.length-1].style.top="",this.dateList[this.dateList.length-1].style.left="");else this.$refs.box.scrollTop>this.absoluteDateList[this.absoluteDateList.length-1].offsetTop-this.$refs.box.offsetTop&&(this.dateList[this.dateList.length-1].style.position="fixed",this.dateList[this.dateList.length-1].style.top=this.$refs.box.offsetTop+10+"px",this.dateList[this.dateList.length-1].style.left=" calc(50% - 90px/2)")}},mounted:function(){var e=this;this.nickname=this.$store.state.nickname;var t=me.database().ref("messages");t.on("value",(function(t){var s=t.val(),a=[];Object.keys(s).forEach((function(e){a.push({id:e,uid:s[e].message.uid,nickName:s[e].message.nickName,content:s[e].message.content,messageTime:s[e].message.messageTime})})),e.messages=a,e.data=s})),this.$refs.box.onscroll=this.scrollH,u["a"].auth().onAuthStateChanged((function(t){null!==t&&(e.nickname=t.displayName)}))},beforeUpdate:function(){this.dateList=[],this.absoluteDateList=[]},watch:{messages:function(){var e=this;this.watchFlag?this.$nextTick((function(){e.$refs.box.scrollTop=e.$refs.box.scrollHeight})):this.watchFlag=!this.watchFlag}}});s("55dc");D.render=P,D.__scopeId="data-v-702c2f79";var $=D,S=Object(a["F"])("data-v-e8258276");Object(a["s"])("data-v-e8258276");var C={class:"loginbody"},M=Object(a["g"])("div",{class:"tittle"},[Object(a["g"])("strong",null,"ログイン")],-1),I={class:"errorBox"},R={class:"email"},A=Object(a["g"])("label",{for:"email"},"メール",-1),_={class:"pass"},B=Object(a["g"])("label",{for:"password"},"パスワード",-1),F={class:"passInput"},N=Object(a["g"])("input",{type:"submit",value:"ログイン",class:"loginBtn"},null,-1),H=Object(a["f"])("新規登録はこちら");Object(a["q"])();var U=S((function(e,t,s,n,i,r){var o=Object(a["w"])("router-link");return Object(a["p"])(),Object(a["d"])("div",C,[M,Object(a["g"])("form",{onSubmit:t[4]||(t[4]=Object(a["E"])((function(){return r.pressed&&r.pressed.apply(r,arguments)}),["prevent"]))},[Object(a["g"])("div",I,[Object(a["g"])("p",null,[Object(a["g"])("strong",null,Object(a["y"])(i.error.message),1)])]),Object(a["g"])("div",R,[A,Object(a["D"])(Object(a["g"])("input",{type:"email",name:"email",id:"email",placeholder:" E-mail",class:"emailInput","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.email=e})},null,512),[[a["B"],i.email]])]),Object(a["g"])("div",_,[B,Object(a["g"])("div",F,[Object(a["D"])(Object(a["g"])("input",{type:i.showPassword?"text":"password",name:"password",id:"password",placeholder:" Password","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.password=e})},null,8,["type"]),[[a["A"],i.password]]),Object(a["g"])("button",{type:"button",id:"showButton",value:i.showPassword?"unshow":"show",onClick:t[3]||(t[3]=function(e){return i.showPassword=!i.showPassword})},[Object(a["g"])("i",{class:i.showPassword?"fa fa-eye":"fa fa-eye-slash"},null,2)],8,["value"])])]),N,Object(a["g"])(o,{to:"/register",id:"register"},{default:S((function(){return[H]})),_:1})],32)])})),q={data:function(){return{email:"",password:"",showPassword:!1,error:""}},methods:{pressed:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u["a"].auth().signInWithEmailAndPassword(e.email,e.password);case 3:e.$router.replace({name:"Home"}),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.error=t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},updated:function(){console.log(this.error)}};s("3813");q.render=U,q.__scopeId="data-v-e8258276";var E=q,z=Object(a["F"])("data-v-3c62fb0e");Object(a["s"])("data-v-3c62fb0e");var V={class:"registerbody"},Z=Object(a["g"])("div",{class:"tittle"},"新規登録",-1),W={key:0,style:{color:"red"}},J={class:"nickname"},Y=Object(a["g"])("label",{for:"nickname"},"ユーザー名",-1),K={class:"email"},Q=Object(a["g"])("label",{for:"mail"},"メール ",-1),G={class:"password"},X=Object(a["g"])("label",{for:"password"},"パスワード ",-1),ee={class:"showPassword"},te={class:"repeatPassword"},se=Object(a["g"])("label",{for:"repeatPassword"},"パスワード再入力 ",-1),ae={class:"showPassword"};Object(a["q"])();var ne=z((function(e,t,s,n,i,r){return Object(a["p"])(),Object(a["d"])("div",V,[Z,i.error?(Object(a["p"])(),Object(a["d"])("div",W,[Object(a["g"])("strong",null,Object(a["y"])(i.error.message),1)])):Object(a["e"])("",!0),Object(a["g"])("form",{onSubmit:t[9]||(t[9]=Object(a["E"])((function(){return r.pressed&&r.pressed.apply(r,arguments)}),["prevent"]))},[Object(a["g"])("div",J,[Y,Object(a["D"])(Object(a["g"])("input",{type:"text",id:"nickname",name:"nickname",required:"","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.nicknameText=e})},null,512),[[a["B"],i.nicknameText]])]),Object(a["g"])("div",K,[Q,Object(a["D"])(Object(a["g"])("input",{type:"email",id:"email",name:"email",required:"","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.emailText=e}),style:[r.emailStyle,r.emailCheckRStyle],onChange:t[3]||(t[3]=function(){return r.emailCheckR&&r.emailCheckR.apply(r,arguments)}),onInput:t[4]||(t[4]=function(){return r.fullToHalf&&r.fullToHalf.apply(r,arguments)})},null,36),[[a["B"],i.emailText]])]),Object(a["g"])("div",G,[X,Object(a["g"])("div",ee,[Object(a["D"])(Object(a["g"])("input",{type:i.showPassword?"text":"password",id:"password",name:"password",required:"","onUpdate:modelValue":t[5]||(t[5]=function(e){return i.passwordT=e}),minlength:"8",style:r.passwordStyle},null,12,["type"]),[[a["A"],i.passwordT]]),Object(a["g"])("button",{type:"button",class:"show",onClick:t[6]||(t[6]=function(e){return i.showPassword=!i.showPassword})},[Object(a["g"])("i",{class:i.showPassword?"fa fa-eye":"fa fa-eye-slash"},null,2)])])]),Object(a["g"])("div",te,[se,Object(a["g"])("div",ae,[Object(a["D"])(Object(a["g"])("input",{type:i.againShowPassword?"text":"password",id:"repeatPassword",name:"repeatPassword",required:"","onUpdate:modelValue":t[7]||(t[7]=function(e){return i.repeatPasswordT=e}),minlength:"8",style:r.repeatPasswordStyle},null,12,["type"]),[[a["A"],i.repeatPasswordT]]),Object(a["g"])("button",{type:"button",class:"show",onClick:t[8]||(t[8]=function(e){return i.againShowPassword=!i.againShowPassword})},[Object(a["g"])("i",{class:i.againShowPassword?"fa fa-eye":"fa fa-eye-slash"},null,2)])])]),Object(a["g"])("button",{type:"submit",class:"submit",disabled:!r.allCheck},"登録",8,["disabled"])],32)])})),ie={data:function(){return{nicknameText:"",passwordT:"",repeatPasswordT:"",emailText:"",mailReg:/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}.[A-Za-z0-9]{1,}$/,emailCheckRFlag:!0,showPassword:!1,againShowPassword:!1,passwordCheckRFlag:!0,error:""}},computed:{emailStyle:function(){return"background:"+(this.mailReg.test(this.emailText)?"#90ee90":"")},emailCheckRStyle:function(){return"background:"+(this.emailCheckRFlag?"":"rgb(255, 182, 182)")},passwordStyle:function(){return"background:"+(this.passwordT.length>7?"#90ee90":"")},repeatPasswordStyle:function(){return"background:"+(this.passwordT===this.repeatPasswordT&&this.passwordT.length>7?"#90ee90":"")},allCheck:function(){return this.mailReg.test(this.emailText)&&this.passwordT===this.repeatPasswordT&&this.passwordT.length>7&&this.passwordT.length>7&&""!==this.nicknameText}},methods:{emailCheckR:function(){this.emailCheckRFlag=this.mailReg.test(this.emailText)},fullToHalf:function(){this.emailText=this.emailText.replace(/[Ａ-Ｚａ-ｚ０-９]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}))},pressed:function(){var e=this;u["a"].auth().createUserWithEmailAndPassword(this.emailText,this.passwordT).then((function(t){return t.user.updateProfile({displayName:e.nicknameText})})).then((function(){e.$router.replace({name:"Home"})})).catch((function(t){return e.error=t}))}}};s("7af4");ie.render=ne,ie.__scopeId="data-v-3c62fb0e";var re=ie,oe=[{path:"/",name:"Home",component:$},{path:"/login",name:"Login",component:E},{path:"/register",name:"Register",component:re}],ce=Object(f["a"])({history:Object(f["b"])(),routes:oe});ce.beforeEach((function(e,t,s){if("/register"===e.path||"/login"===e.path)var a=u["a"].auth().onAuthStateChanged((function(e){console.log(e),e?s("/"):s(),a()}));else s()}));var le=ce,ue=s("5502"),de=Object(ue["a"])({state:{logCheck:!1,nickname:null,uid:null},mutations:{},actions:{},modules:{}}),pe=s("bc3a"),be=s.n(pe),he=s("2106"),fe=s.n(he),ge=(s("66ce"),{apiKey:"AIzaSyAkmQ12qMiCzrYS7MAW9cfZoqASDW1odOc",authDomain:"vue-chat-36815.firebaseapp.com",databaseURL:"vue-chat-36815-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"vue-chat-36815",storageBucket:"vue-chat-36815.appspot.com",messagingSenderId:"14261960732",appId:"1:14261960732:web:006d4003f4e22cdea85fd9"}),me=u["a"].initializeApp(ge),Oe=Object(a["c"])(h);Oe.use(de),Oe.use(le),Oe.use(fe.a,be.a),Oe.mount("#app")},"6e60":function(e,t,s){"use strict";s("0655")},"7af4":function(e,t,s){"use strict";s("b7a5")},b59a:function(e,t,s){},b7a5:function(e,t,s){},dccd:function(e,t,s){}});
//# sourceMappingURL=app.d0f16c42.js.map